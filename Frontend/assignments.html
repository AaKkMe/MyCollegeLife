<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyCollegeLife - Assignments</title>
    <link rel="stylesheet" href="static/css/assingments.css">
</head>
<body>
    <header>
        <h1>MyCollegeLife</h1>
        <nav>
            <ul>
                <li><a href="index.html">Dashboard</a></li>
                <li><a href="classes.html">Classes</a></li>
                <li><a href="assignments.html">Assignments</a></li>
                
                <li><a href="studylog.html">Study Log</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="assignment-management">
            <h2>Assignments</h2>
            <div id="assignment-list"></div>

            <h3>Add a New Assignment</h3>
            <form id="add-assignment-form">
                <input type="text" id="assignment-title" placeholder="Title" required>
                <input type="text" id="assignment-subject" placeholder="Subject" required>
                <input type="text" id="assignment-due-date" placeholder="Due Date (e.g., 2025-12-31)" required>
                <button type="submit">Add Assignment</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 MyCollegeLife. All rights reserved.</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const assignmentList = document.getElementById('assignment-list');
            const addAssignmentForm = document.getElementById('add-assignment-form');

            // Function to fetch and display assignments
            const fetchAssignments = () => {
                fetch('/api/assignments')
                    .then(response => response.json())
                    .then(data => {
                        assignmentList.innerHTML = '';
                        data.forEach(a => {
                            assignmentList.innerHTML += <div class="assignment-item"><strong>${a.title}</strong> - ${a.subject} (Due: ${a.due_date})</div>;
                        });
                    });
            };

            // Fetch assignments on page load
            fetchAssignments();

            // Handle form submission
            addAssignmentForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const assignmentTitle = document.getElementById('assignment-title').value;
                const assignmentSubject = document.getElementById('assignment-subject').value;
                const assignmentDueDate = document.getElementById('assignment-due-date').value;

                fetch('/api/add-assignment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ title: assignmentTitle, subject: assignmentSubject, due_date: assignmentDueDate })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data.message);
                    fetchAssignments(); // Refresh the list
                    addAssignmentForm.reset();
                });
            });
        });
    </script>
</body>
</html>